@model IEnumerable<MrGroom_KY_SL.Web.Models.EmailSendResult>
@{
    ViewBag.Title = "Email Send Results";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="result-wrapper py-5">
    <div class="result-card p-5 shadow-lg">

        <!-- Header -->
        <div class="text-center mb-5">
            <h2 class="fw-bold text-gradient">
                <i class="bi bi-envelope-check me-2"></i> Email Send Results
            </h2>
            <p class="text-muted">Review the delivery status of each customer email ✨</p>
        </div>

        <!-- Results Table -->
        <div class="table-responsive">
            <table class="table modern-table align-middle">
                <thead>
                    <tr>
                        <th><i class="bi bi-person-badge"></i> Customer ID</th>
                        <th><i class="bi bi-envelope"></i> Email</th>
                        <th><i class="bi bi-circle-half"></i> Result</th>
                        <th><i class="bi bi-info-circle"></i> Details</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var r in Model)
                    {
                        <tr>
                            <td>@r.CustomerId</td>
                            <td>@r.CustomerEmail</td>

                            <td>
                                @if (r.Success)
                                {
                                    <span class="status-badge success">
                                        <i class="bi bi-check-circle"></i> Success
                                    </span>
                                }
                                else
                                {
                                    <span class="status-badge failed">
                                        <i class="bi bi-x-circle"></i> Failed
                                    </span>
                                }
                            </td>

                            <td class="text-wrap" style="max-width: 250px;">
                                @(!string.IsNullOrEmpty(r.ErrorMessage) ? r.ErrorMessage : "-")
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Back Button -->
        <div class="text-end mt-4">
            <a href="@Url.Action("Index", "EmailSender")" class="btn btn-glow px-4">
                <i class="bi bi-arrow-left"></i> Back
            </a>
        </div>

    </div>
</div>


@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        body {
            background: linear-gradient(120deg, #e0e7ff, #f5f3ff, #f0f9ff);
            background-size: 300% 300%;
            animation: bgShift 12s ease infinite;
            font-family: 'Poppins', 'Segoe UI', sans-serif;
        }

        @@keyframes bgShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .result-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .result-card {
            width: 100%;
            max-width: 900px;
            background: #ffffff;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s ease;
            box-shadow: 0px 8px 25px rgba(0,0,0,0.1);
        }

            .result-card::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                height: 6px;
                width: 100%;
                background: linear-gradient(90deg, #4b6cb7, #43cea2, #4b6cb7);
                animation: gradientFlow 5s linear infinite;
            }

        @@keyframes gradientFlow {
            0% {
                background-position: 0%;
            }

            100% {
                background-position: 100%;
            }
        }

        @@keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .text-gradient {
            background: linear-gradient(90deg, #185a9d, #43cea2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Modern table */
        .modern-table {
            background: #f8fafc;
            border-radius: 12px;
            overflow: hidden;
        }

            .modern-table thead {
                background: #e2e8f0;
                font-weight: 600;
                color: #334155;
            }

            .modern-table tbody tr:nth-child(even) {
                background: #f1f5f9;
            }

            .modern-table tbody tr:hover {
                background: #e0f2fe;
                transition: 0.2s ease;
            }

        /* Status Badges */
        .status-badge {
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
        }

            .status-badge.success {
                background: rgba(34,197,94,0.15);
                color: #0f5132;
            }

            .status-badge.failed {
                background: rgba(239,68,68,0.15);
                color: #b91c1c;
            }

        /* Glow button */
        .btn-glow {
            background: linear-gradient(90deg, #43cea2, #185a9d);
            color: white;
            font-weight: 600;
            border-radius: 10px;
            box-shadow: 0 3px 12px rgba(24, 90, 157, 0.4);
            border: none;
        }

            .btn-glow:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(24, 90, 157, 0.5);
            }
    </style>
}
